(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{382:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(362);t.a=function(e){return r.a.createElement("div",{className:"header bg-gradient-info pb-8 pt-5 pt-md-8"},r.a.createElement(l.a,{fluid:!0},e.children))}},384:function(e,t,a){"use strict";var n=a(76),r=a(0),l=a.n(r),c=a(358),o=a(390),s=a(361),i=a(75);t.a=function(e){var t=e.name,a=e.label,r=Object(n.a)(e,["name","label"]),u=Object(i.c)(),m=u.values,d=u.errors,b=u.touched,p=u.setFieldValue,v=m[t],f=b[t]&&d[t],g=" form-control form-control-alternative text-black";return f&&(g+=" border border-danger"),l.a.createElement(c.a,null,a&&l.a.createElement(o.a,{className:"form-control-label"},a),l.a.createElement(s.a,Object.assign({},r,{className:g,autoComplete:"off",value:v,onChange:function(e){p(t,e.target.value)}})),f&&l.a.createElement("div",{className:"alert alert-danger"},f))}},386:function(e,t,a){"use strict";var n=a(25),r=a(76),l=a(0),c=a.n(l),o=a(358),s=a(390),i=a(361),u=a(75);t.a=function(e){var t=e.name,a=e.label,l=e.className,m=e.options,d=void 0===m?[]:m,b=e.placeholder,p=Object(r.a)(e,["name","label","className","options","placeholder"]),v=Object(u.c)(),f=v.values,g=v.errors,E=v.touched,h=v.setFieldValue,y=f[t],x=E[t]&&g[t],k=l+" form-control form-control-alternative text-black";return x&&(k+=" border border-danger"),b&&(d=[{label:b||"",value:""}].concat(Object(n.a)(d))),c.a.createElement(o.a,null,a&&c.a.createElement(s.a,{className:"form-control-label"},a),c.a.createElement(i.a,Object.assign({},p,{type:"select",className:k,style:{color:"black"},value:y,onChange:function(e){console.log(e.target.value),h(t,e.target.value)}}),d.map(function(e,t){return c.a.createElement("option",{key:t,value:e.value},e.label)})),x&&c.a.createElement("div",{className:"alert alert-danger"},x))}},495:function(e,t,a){"use strict";a.r(t);var n=a(34),r=a.n(n),l=a(65),c=a(64),o=a(0),s=a.n(o),i=a(188),u=a(362),m=a(365),d=a(387),b=a(366),p=a(382),v=a(10),f=a(50),g=a(38),E=a(75),h=a(78),y=a(384),x=a(386),k=a(29),w=a(40),N=(a(76),a(358),a(390),a(467),a(471),a(476)),j=function(e){var t=e.onChange,a=void 0===t?function(){}:t,n=e.imagePreview,r=void 0===n?"":n,l=Object(o.useState)(r),i=Object(c.a)(l,2),u=i[0],m=i[1];return s.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",marginBottom:"5px"}},s.a.createElement(N.a,{onDrop:function(e){var t=e[0],n=new FileReader;n.readAsDataURL(t),n.onloadend=function(e){m(n.result)}.bind(void 0),a&&a(e)}},function(e){var t=e.getRootProps,a=e.getInputProps;return s.a.createElement("section",null,s.a.createElement("div",t(),s.a.createElement("input",a()),s.a.createElement("div",{style:{minHeight:"180px",minWidth:"180px",maxHeight:"300px",maxWidth:"400px",border:"3px dashed #ccc",display:"flex",alignItems:"center",justifyContent:"center"}},null!==u?s.a.createElement("img",{src:u,className:"w-100"}):s.a.createElement("p",{style:{textAlign:"center",color:"#ccc",maxWidth:"200px"}},"Drag 'n' drop image here, or click to select image"))))}))};t.default=function(e){var t=e.match,a=e.history,n=Object(o.useState)({title:"",type:"youtube_video",youtubeVideo:"",image:"",description:"",link:"",_id:""}),N=Object(c.a)(n,2),O=N[0],S=N[1],P=Object(o.useState)(null),V=Object(c.a)(P,2),C=V[0],F=V[1],_=t.params.identifier;Object(o.useEffect)(function(){"add"!==_&&_!==O._id&&D(_)},[_]);var D=function(){var e=Object(l.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get({url:"/posts/"+_});case 3:n=e.sent,S(n.data),e.next=16;break;case 7:e.prev=7,e.t0=e.catch(0),e.t1=e.t0.response.status,e.next=404===e.t1?12:15;break;case 12:return Object(f.a)("Post not found!"),a.replace(v.b+"/posts/"),e.abrupt("break",16);case 15:Object(f.a)("Something went wrong!");case 16:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(r.a.mark(function e(t,n){var l,c,o,i,u,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.setSubmitting,c=n.setErrors,e.prev=1,"blog"!==t.type||null===C){e.next=9;break}return(i=new FormData).append("image",C),e.next=7,g.a.post({url:"/media/image",body:i});case 7:o=e.sent,t.image=o.data._id;case 9:if("add"!==_){e.next=16;break}return e.next=12,g.a.post({url:"/posts/",body:t});case 12:u=e.sent,S(u.data),e.next=20;break;case 16:return e.next=18,g.a.put({url:"/posts/"+_,body:t});case 18:m=e.sent,S(m.data);case 20:F(null),k.toast.success(s.a.createElement(w.a,{title:"Success",message:"add"===_?"Post Created Successfully.":"Post Updated Successfully."})),a.goBack(),e.next=35;break;case 25:e.prev=25,e.t0=e.catch(1),e.t1=e.t0.response.status,e.next=400===e.t1?30:404===e.t1?32:34;break;case 30:return c(e.t0.response.data.error),e.abrupt("break",35);case 32:return Object(f.a)("This post is deleted"),e.abrupt("break",35);case 34:Object(f.a)("Something went wrong!");case 35:return e.prev=35,l(!1),e.finish(35);case 38:case"end":return e.stop()}},e,null,[[1,25,35,38]])}));return function(t,a){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,null),s.a.createElement(u.a,{className:"mt--7"},s.a.createElement(m.a,{className:"shadow"},s.a.createElement(d.a,null,s.a.createElement("div",{className:"clearfix"},s.a.createElement("h2",{className:"mb-0 float-left"},"add"===_?"Add Post":O.title))),s.a.createElement(b.a,{className:"bg-secondary"},s.a.createElement(E.b,{initialValues:{title:O.title,type:O.type,link:O.link,youtubeVideo:O.youtubeVideo,description:O.description},validationSchema:h.d().shape({title:h.e().trim().min(1).required(),type:h.e().trim().required(),youtubeVideo:h.e().when("type",{is:"youtube_video",then:h.e().required()}),link:h.e().when("type",{is:"blog",then:h.e().required()})}),onSubmit:q,enableReinitialize:!0},function(e){var t=e.values,a=e.isSubmitting,n=e.submitForm,r=t.type;return s.a.createElement(E.a,null,s.a.createElement("div",{className:"row"},"blog"===r&&s.a.createElement("div",{className:"col-12"},s.a.createElement(j,{imagePreview:O.image.thumbnailUrl,onChange:function(e){F(e[0])}})),s.a.createElement("div",{className:"col-12"},s.a.createElement(y.a,{label:"Post Title",name:"title",placeholder:"Post Title..."})),s.a.createElement("div",{className:"col-12"},s.a.createElement(x.a,{name:"type",label:"Post Type",options:[{label:"Youtube Video",value:"youtube_video"},{label:"Blog",value:"blog"}]})),"youtube_video"===r&&s.a.createElement("div",{className:"col-12"},s.a.createElement(y.a,{label:"Youtube Video Id",name:"youtubeVideo",placeholder:"youtube video id"})),"blog"===r&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"col-12"},s.a.createElement(y.a,{label:"Description",name:"description",placeholder:"description..."})),s.a.createElement("div",{className:"col-12"},s.a.createElement(y.a,{label:"Link",name:"link",placeholder:"Link"}))),s.a.createElement("div",{className:"col-12 text-center"},s.a.createElement(i.a,{color:"primary",disabled:a,type:"submit",onClick:n},"Save"))))})))))}}}]);
//# sourceMappingURL=19.6e1bef66.chunk.js.map